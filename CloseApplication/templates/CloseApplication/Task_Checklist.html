{% extends "CloseApplication/base.html" %}
{% load static %}

{% block title %}name of the site{% endblock %}
{% block content %}
    {% if latest_question_list %}
        <table class ="table table-striped table-bordered table-hover" id="Task_ChecklistTable">
            <thead>
            <tr>
                <th></th>
                <th>Task ID</th>
                <th>Description</th>
                <th>Period</th>
                <th>Year</th>
                <th>Occurence</th>
                <th>Owner ID</th>
                <th>Status</th>
                <th>Journal Entry?</th>
                <th>Date Created</th>
            </tr>
            </thead>
            <tbody>
            {% for tableValue in TaskChecklist_Values %}
            <tr>
                <td><button class="btn btn-indigo btn-rounded btn-sm m-0" onclick="openForm()">Edit</button></td>
                <td>{{ tableValue.taskId }}</td>
                <td>{{ tableValue.taskDescription }}</td>
                <td>{{ tableValue.taskPeriod }}</td>
                <td>{{ tableValue.taskYear }}</td>
                <td>{{ tableValue.get_taskOccurence_display }}</td>
                <td>{{ tableValue.taskOwnerId }}</td>
                <td>{{ tableValue.get_taskStatus_display }}</td>
                <td>{{ tableValue.isJE }}</td>
                <td>{{ tableValue.pub_date }}</td>
            </tr>
                {% for subTableValue in subTasklist_Values %}
                    {% if tableValue.taskId == subTableValue.taskId|stringformat:"s" %} {# "stringformat" filter property required as subTableValue.taskId type is foreign key vs. charfield on other table #}
                        <tr>
                            <td></td>
                            <td colspan="9">subtask</td>
                        </tr>
                    {% endif %}
                {% endfor %}
            {% endfor %}
        </tbody>
        </table>
    {% else %}
        <p>No polls are available.</p>
    {% endif %}
{% endblock %}